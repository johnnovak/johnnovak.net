$(document).ready(function(){function e(){$("#wrapper").css("display","block")}function t(){for(var e="transformProperty WebkitTransform MozTransform OTransform".split(" "),t=0;t<e.length;t++)if(void 0!==document.createElement("div").style[e[t]])return e[t];return!1}function n(){return"fixed"!=$("#mainmenu").css("position")}function o(){var e=9999999,t=0;for(i=0;i<l.length;i++){var n=Math.abs(d-l[i]);e>n&&(e=n,t=i)}return t}function r(e){D=!0;var t=$(window).height(),n=$(document).height(),o=n-t;v=e,0>v?v=0:v>o&&(v=o),p||(d=$(window).scrollTop(),p=setInterval(function(){var e=(v-d)*k,t=e/Math.abs(e);g+=b*t,Math.abs(e)>Math.abs(g)?e=g:g=e,d+=e,$(window).scrollTop(d),Math.abs(d-v)<.5&&(D=!1,d=v,clearInterval(p),p=void 0,T=!1)},1e3/60))}function a(e){if(y){var t=o();switch(e.keyCode){case 38:case 33:e.preventDefault(),t--;break;case 40:case 34:e.preventDefault(),t++;break;case 36:e.preventDefault(),t=0;break;case 35:e.preventDefault(),t=l.length-1;break;case 37:case 39:return e.preventDefault(),void 0;default:return}t=Math.max(Math.min(t,l.length-1),0),T=!0,r(l[t])}}function c(){y&&!T&&(currentSection=o())}function u(e,t){y&&(h?T&&e.preventDefault():(e.preventDefault(),T||(scrollTop=$(window).scrollTop(),r(scrollTop+-w*t))))}function f(){l=[$("#about").offset().top,$("#music").offset().top,$("#photo").offset().top,$("#code").offset().top],$.stellar({positionProperty:t()?"transform":"position",horizontalScrolling:!1,parallaxBackgrounds:!1}),M=!0}function s(){y=!n(),!M&&y&&f()}var l,p,d,v,m,h,b=25,k=.1,w=250,D=!1,T=!1,g=0,M=!1,y=!1;e(),isDesktop&&($("html").addClass("desktop"),h=-1!==navigator.platform.toUpperCase().indexOf("MAC"),$(document).bind("mousewheel",u),$(document).bind("keydown",a),$(document).bind("scroll",c),y=!n(),y&&f(),$(window).bind("resize",function(){clearTimeout(m),m=setTimeout(s,100)}),$("#menu-about").click(function(e){if(y){e.preventDefault();var t=0;T=!0,r(l[t])}}),$("#menu-music").click(function(e){if(y){e.preventDefault();var t=1;T=!0,r(l[t])}}),$("#menu-photo").click(function(){if(y){event.preventDefault();var e=2;T=!0,r(l[e])}}),$("#menu-code").click(function(){if(y){event.preventDefault();var e=3;T=!0,r(l[e])}}))});